workers:
  -
    resources:
      - kind: secret
        name: cjohnson-test
        vaultBaseURL: https://cjohnson-kv.vault.azure.net/
        version: latest
      - kind: cert
        name: cjohnson-test
        vaultBaseURL: https://cjohnson-kv.vault.azure.net/
        version: latest
    frequency: 5s
    preChange: restart nginx
    postChange: echo it worked
    sinks:
      - path: ./private.key
        template: "{{ .secrets.cjohnson-test.value | toPrivateKey }}"
      - path: ./thing.cert
        template: "{{ .secrets.cjohnson-test.value | toCert }}"
  -
    resources:
      - kind: secret
        name: cjohnson-other-secret
    frequency: 5s
    preChange: nginx restart
    sinks:
      - path: ./app.json
        template: "{{ .secrets.cjohnson-other-secret.value | toJson }}"
        vaultBaseURL: https://cjohnson-kv.vault.azure.net/